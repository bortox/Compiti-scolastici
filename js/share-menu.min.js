import*as t from"./icone-per-socializzare.min.js";class i extends HTMLElement{constructor(){super(),this.t=!1,this.i={clipboard:{color:"#777",title:"Copy to clipboard",action:()=>{const t={message:"Unable to copy to clipboard"};if(!navigator.clipboard)return this.s("error",t);navigator.clipboard.writeText(`${this.title}\n\n${this.text}\n\n${this.url}`).catch(()=>this.s("error",t))}},facebook:{color:"#3b5998",title:"Facebook",action:()=>{window.FB?window.FB.ui({href:this.url,method:"share",mobile_iframe:!0,quote:this.text}):this.o(`https://www.facebook.com/sharer.php?u=${this.h(this.url)}&description=${this.h(this.title)}%0A%0A${this.h(this.text)}`)}},twitter:{color:"#1da1f2",title:"Twitter",action:()=>{this.o(`https://twitter.com/intent/tweet?text=${this.h(this.title)}%0A${this.h(this.text)}&url=${this.h(this.url)}${this.via?`&via=${this.h(this.via)}`:""}`)}},whatsapp:{color:"#25d366",title:"WhatsApp",action:()=>{this.o(`whatsapp://send?text=*${this.h(this.title)}*%0A%0A${this.h(this.text)}%0A%0A${this.h(this.url)}`,!0)}},telegram:{color:"#0088cc",title:"Telegram",action:()=>{this.o(`https://t.me/share/url?url=${this.h(this.url)}&text=**${this.h(this.title)}**%0A${this.h(this.text)}`)}},linkedin:{color:"#0077b5",title:"LinkedIn",action:()=>{this.o(`https://www.linkedin.com/shareArticle?mini=true&url=${this.h(this.url)}&title=${this.h(this.title)}&summary=${this.h(this.text)}&source=${this.h(this.via)}`)}},pinterest:{color:"#bd081c",title:"Pinterest",imageOnly:!0,action:()=>{const t=document.createElement("button");t.onclick=()=>{const t=document.createElement("script");t.src=`https://assets.pinterest.com/js/pinmarklet.js?r=${99999999*Math.random()}`,document.body.appendChild(t)},t.style.display="none";const i=document.createElement("img");i.src=this.url,i.alt=this.text,i.title=this.title,i.style.width="400px",i.style.height="auto",t.appendChild(i),document.body.appendChild(t),t.click()}},tumblr:{color:"#35465c",title:"Tumblr",action:()=>{this.o(`https://www.tumblr.com/widgets/share/tool?canonicalUrl=${this.h(this.url)}&title=${this.h(this.title)}&caption=${this.h(this.text)}`)}},reddit:{color:"#ff4500",title:"Reddit",action:()=>{const t=this.text?`text=${this.h(this.text)}%0A%0A${this.h(this.url)}`:`url=${this.h(this.url)}`;this.o(`https://reddit.com/submit?${t}&title=${this.h(this.title)}`)}},vk:{color:"#45668e",title:"VK",action:()=>{this.o(`https://vk.com/share.php?url=${this.h(this.url)}`)}},skype:{color:"#00aff0",title:"Skype",action:()=>{this.o(`https://web.skype.com/share?url=${this.h(this.url)}`)}},viber:{color:"#665cac",title:"Viber",action:()=>{this.o(`viber://forward?text=${this.h(this.title)}%0A%0A${this.h(this.text)}%0A%0A${this.h(this.url)}`,!0)}},line:{color:"#00c300",title:"Line",action:()=>{this.o(`https://lineit.line.me/share/ui?url=${this.h(this.url)}`)}},qzone:{color:"#ffce00",title:"Qzone",action:()=>{this.o(`https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${this.h(this.url)}`)}},wordpress:{color:"#0087be",title:"WordPress",action:()=>{const t=this.t?`&i=${this.h(this.url)}`:"";this.o(`https://wordpress.com/press-this.php?u=${this.h(window.location.href)}&t=${this.h(this.title)}&s=${this.h(this.text)}${t}`)}},blogger:{color:"#f57d00",title:"Blogger",action:()=>{this.o(`https://www.blogger.com/blog-this.g?u=${this.h(this.url)}&n=${this.h(this.title)}&t=${this.h(this.text)}`)}},flipboard:{color:"#e12828",title:"Flipboard",action:()=>{this.o(`https://share.flipboard.com/bookmarklet/popout?v=2&title=${this.h(this.title)}&url=${this.h(this.url)}`)}},evernote:{color:"#2dbe60",title:"Evernote",action:()=>{this.o(`https://www.evernote.com/clip.action?url=${this.h(this.url)}`)}},myspace:{color:"#000",title:"Myspace",action:()=>{this.o(`https://myspace.com/post?u=${this.h(this.url)}&t=${this.h(this.title)}&c=${this.h(this.text)}`)}},pocket:{color:"#ef4056",title:"Pocket",action:()=>{this.o(`https://getpocket.com/save?url=${this.h(this.url)}`)}},livejournal:{color:"#004359",title:"LiveJournal",action:()=>{this.o(`http://www.livejournal.com/update.bml?subject=${this.h(this.title)}&event=${this.h(this.text)}%0A%0A${this.h(this.url)}`)}},instapaper:{color:"#000",title:"Instapaper",action:()=>{this.o(`https://www.instapaper.com/edit?url=${this.h(this.url)}&title=${this.h(this.title)}&description=${this.h(this.text)}`)}},baidu:{color:"#2529d8",title:"Baidu",action:()=>{this.o(`http://cang.baidu.com/do/add?it=${this.h(this.title)}&iu=${this.h(this.url)}`)}},okru:{color:"#ee8208",title:"OK.ru",action:()=>{this.o(`https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl=${this.h(this.url)}&title=${this.h(this.title)}`)}},xing:{color:"#026466",title:"XING",action:()=>{this.o(`https://www.xing.com/app/user?op=share&url=${this.h(this.url)}`)}},buffer:{color:"#323b43",title:"Buffer",action:()=>{this.o(`https://buffer.com/add?text=${this.h(this.title)}&url=${this.h(this.url)}`)}},digg:{color:"#005be2",title:"Digg",action:()=>{this.o(`https://digg.com/submit?url=${this.h(this.url)}&title=${this.h(this.title)}`)}},douban:{color:"#007610",title:"Douban",action:()=>{this.o(`https://www.douban.com/recommend/?url=${this.h(this.url)}&title=${this.h(this.title)}`)}},stumbleupon:{color:"#eb4924",title:"StumbleUpon",action:()=>{this.o(`https://www.stumbleupon.com/submit?url=${this.h(this.url)}&title=${this.h(this.title)}`)}},weibo:{color:"#df2029",title:"Weibo",action:()=>{this.o(`http://service.weibo.com/share/share.php?url=${this.h(this.url)}&appkey=&title=${this.h(this.title)}%0A%0A${this.h(this.text)}&pic=&ralateUid=`)}},print:{color:"#425563",title:"Print",action:()=>{this.o(this.url).print()}},translate:{color:"#4285f4",title:"Translate",action:()=>{const t=navigator.language.slice(0,2);this.o(`https://translate.google.it/translate?hl=${t}&sl=auto&u=${this.h(this.url)}`)}},email:{color:"#ffa930",title:"Email",action:()=>{this.o(`mailto:?subject=${this.h(this.title)}&body=${this.h(this.text)}%0A%0A${this.h(this.url)}`,!0)}},sms:{color:"#43695b",title:"SMS",action:()=>{let t="?";if(/iP(hone|od|ad)/.test(navigator.platform)){const[,i]=navigator.appVersion.match(/OS (\d+)/);t=parseInt(i,10)<8?";":"&"}this.o(`sms:${t}body=${this.h(this.title)}%0A%0A${this.h(this.text)}%0A%0A${this.h(this.url)}`,!0)}},yahoo:{color:"#410093",title:"Yahoo!",action:()=>{this.o(`https://compose.mail.yahoo.com/?body=${this.h(this.title)}%0A%0A${this.h(this.text)}%0A%0A%${this.h(this.url)}`)}}},this.l=Object.keys(this.i),this.p="#backdrop,.social .icon::before{z-index:-1;top:0;left:0;width:100%;height:100%}:host{font-family:Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';position:fixed;top:0;left:0;width:100%;height:100%;max-height:100%;z-index:-1;will-change:z-index;transition:z-index .3s step-end;overflow-y:auto;display:none}:host([opened]){z-index:9999;transition:z-index .3s step-start}*{box-sizing:border-box}#backdrop{position:fixed;opacity:0;background:var(--backdrop-color,#000);will-change:opacity;transition:opacity .3s cubic-bezier(.4,0,1,1);cursor:pointer}#dialog,.social{background:var(--background-color,#fff)}:host([opened]) #backdrop{opacity:.6;transition:opacity .3s cubic-bezier(0,0,.2,1)}:host([no-backdrop]) #backdrop{display:none}#dialog{margin:100vh auto 0;width:100%;max-width:640px;will-change:transform;transform:translateY(100vh);transition:transform .3s cubic-bezier(.4,0,1,1)}:host([opened]) #dialog{transform:translateY(0);transition:transform .3s cubic-bezier(0,0,.2,1)}.social,.social .icon::before{will-change:transform;transition:transform .3s}#title{color:var(--title-color,rgba(0,0,0,.6));font-weight:400;font-size:14px;margin:0;padding:12px}#socials-container{display:flex;flex-wrap:wrap;justify-content:center}.social{width:72px;height:100px;padding:12px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;cursor:pointer;border:none;outline:0}.social:hover{transform:scale(1.05)}.social .icon{position:relative;width:48px;height:48px;padding:8px}.social .icon::before{content:'';position:absolute;border-radius:50%;background:var(--ripple-color,#000);opacity:.12;transform:scale(0)}.social:active .icon::before,.social:focus .icon::before{transform:scale(1)}.social .label{color:var(--labels-color,rgba(0,0,0,.87));font-weight:400;font-size:12px;text-align:center}",this.u=document.createElement("template"),this.u.innerHTML=`${i.m?"":`<style>${this.p}</style>`}<div id=backdrop part=backdrop tabindex=-1></div><div id=dialog part=dialog aria-labelledby=title role=dialog><h2 id=title part=title></h2><div id=socials-container></div></div>`,this.attachShadow({mode:"open"}),i.m&&(i.stylesheet=new CSSStyleSheet,this.shadowRoot.adoptedStyleSheets=[i.stylesheet]),this.shadowRoot.appendChild(this.u.content.cloneNode(!0))}get opened(){return this.hasAttribute("opened")}set opened(t){t?this.setAttribute("opened",""):this.removeAttribute("opened")}get dialogTitle(){return this.getAttribute("dialog-title")}set dialogTitle(t){this.setAttribute("dialog-title",t)}get socials(){return this.l}set socials(t){this.l=t,this.g()}get text(){return this.getAttribute("text")}set text(t){this.setAttribute("text",t)}get title(){return this.getAttribute("title")}set title(t){this.setAttribute("title",t)}get url(){return this.getAttribute("url")}set url(t){this.setAttribute("url",t)}get via(){return this.getAttribute("via")}set via(t){this.setAttribute("via",t)}get isImage(){return this.getAttribute("is-image")}set isImage(t){this.setAttribute("is-image",t)}get noBackdrop(){return this.hasAttribute("no-backdrop")}set noBackdrop(t){t?this.setAttribute("no-backdrop",""):this.removeAttribute("no-backdrop")}share({text:t=this.text,title:i=this.title,url:s=this.url,via:e=this.via}={}){return this.text=t,this.title=i,this.url=s,this.via=e,navigator.share?navigator.share({text:this.text,title:this.title,url:this.url}).then(()=>{this.opened=!1,["share","close"].forEach(t=>this.s(t,{origin:"native"}))}).catch(({name:t})=>{if("AbortError"!==t)return this.$();this.s("close",{origin:"native"})}):this.$()}connectedCallback(){if(i.m&&i.stylesheet&&0===i.stylesheet.cssRules.length&&i.stylesheet.replace(this.p),null===this.text){const t=document.querySelector('meta[name="description"]');this.text=t&&t.content||""}if(null===this.title&&(this.title=document.title||""),null===this.url){const t=document.querySelector("link[rel=canonical]");this.url=t&&t.href||window.location.href}this.dialogTitle||(this.dialogTitle="Share with"),this.k=this.shadowRoot.querySelector("#backdrop"),this.v=this.shadowRoot.querySelector("#dialog"),this.A=this.shadowRoot.querySelector("#title"),this.A.textContent=this.dialogTitle,this.S=this.shadowRoot.querySelector("#socials-container"),this.socials=Object.keys(this.i)}attributeChangedCallback(t,i,s){if(i!==s)switch(t){case"dialog-title":this.A&&(this.A.textContent=s);break;case"opened":null===s?this.j():this.share();break;case"url":if("auto"!==this.isImage)return;let t=new Image;t.addEventListener("load",()=>{this.t=!0,t=null,this.g()}),t.addEventListener("error",()=>{this.t=!1,t=null,this.g()}),t.src=s;break;case"is-image":switch(s){case"yes":case"true":case"1":this.t=!0,this.g();break;case"no":case"false":case"0":this.t=!1,this.g();break;default:this.isImage="auto"}}}g(){this.S&&(this.S.innerHTML="",this.l.forEach((i,s)=>{const{color:e,title:o,action:h,imageOnly:a}=this.i[i];if(a&&!this.t)return;const r=document.createElement("button");r.className="social",r.id=i,r.title=o,r.setAttribute("part","social-button"),r.addEventListener("click",()=>{h(),this.s("share",{social:i,origin:"fallback"}),this.j()});const n=document.createElement("div");n.className="icon",n.innerHTML=`<svg viewBox="0 0 256 256"><path d="${t[i]}"/></svg>`,n.style.fill=e,n.setAttribute("part","social-icon"),r.appendChild(n);const l=document.createElement("div");l.className="label",l.textContent=o,l.setAttribute("part","social-label"),r.appendChild(l),this.S.appendChild(r),0===s&&(this._=r),s===this.l.length-1&&(this.I=r)}))}o(t,i){return window.open(t,i?"_self":"_blank",`width=${screen.width/2},height=${screen.height/2},left=${screen.width/4},top=${screen.height/4},menubar=0,status=0,titlebar=0,toolbar=0`,!1)}h(t){return encodeURIComponent(t)}s(t,i){return this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:i}))}$(){return new Promise(t=>{this.T=document.activeElement,this.style.display="block",this._.focus(),this.scrollTop=Math.max(window.innerHeight/2,window.innerHeight-this.v.offsetHeight),this.opened=!0,this.k.addEventListener("click",this.j.bind(this)),this.addEventListener("scroll",this.C.bind(this)),this.addEventListener("keydown",this.U.bind(this)),this.addEventListener("share",function i(){this.removeEventListener("share",i),t()}.bind(this))})}j(){this.k.removeEventListener("click",this.j),this.removeEventListener("scroll",this.C),this.opened=!1,this.scroll({behavior:"smooth",top:0}),this.T&&(this.T.focus(),this.T=null),setTimeout(()=>{this.style.display="none",this.s("close",{origin:"fallback"})},300)}C(){this.scrollTop<80&&this.j()}U(t){switch(t.key){case"Escape":this.j();break;case"Tab":if(this.socials.length<2){t.preventDefault();break}const i=this.shadowRoot.activeElement||document.activeElement;t.shiftKey&&i===this._?(t.preventDefault(),this.I.focus()):t.shiftKey||i!==this.I||(t.preventDefault(),this._.focus())}}}i.observedAttributes=["dialog-title","opened","url","is-image","no-backdrop"],i.m="adoptedStyleSheets"in Document.prototype,window.customElements.define("share-menu",i);export{i as ShareMenu};
